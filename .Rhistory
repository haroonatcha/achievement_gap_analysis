ymax = white),
fill = 'grey90',
pattern_angle = 115,
pattern_colour = NA,
pattern_density = 0.5,
pattern = 'stripe') +
geom_line(data = line,
aes(y = completion,
group = ethnicity,
color = ethnicity)) +
scale_x_continuous(breaks = min(viz$year):max(viz$year),
expand = expansion(add = c(0, 0.2))) +
scale_y_continuous(labels = label_percent(accuracy = 1L)) +
labs(x = '\nYear',
y = '3-Year Completion Rate\n',
title = '3-Year Achievement Gap by Ethnicity') +
my_theme
ggplot(data = ribbon,
aes(x = year)) +
geom_ribbon(aes(ymin = black_aa,
ymax = white),
fill = 'grey90') +
geom_ribbon_pattern(aes(ymin = hispanic_latino,
ymax = white),
fill = 'grey90',
pattern_angle = 115,
pattern_colour = NA,
pattern_density = 0.5,
pattern = 'stripe') +
geom_line(data = line,
aes(y = completion,
group = ethnicity,
color = ethnicity)) +
scale_x_continuous(breaks = min(line$year):max(line$year),
expand = expansion(add = c(0, 0.2))) +
scale_y_continuous(labels = label_percent(accuracy = 1L)) +
labs(x = '\nYear',
y = '3-Year Completion Rate\n',
title = '3-Year Achievement Gap by Ethnicity') +
my_theme
library('scales')
ggplot(data = ribbon,
aes(x = year)) +
geom_ribbon(aes(ymin = black_aa,
ymax = white),
fill = 'grey90') +
geom_ribbon_pattern(aes(ymin = hispanic_latino,
ymax = white),
fill = 'grey90',
pattern_angle = 115,
pattern_colour = NA,
pattern_density = 0.5,
pattern = 'stripe') +
geom_line(data = line,
aes(y = completion,
group = ethnicity,
color = ethnicity)) +
scale_x_continuous(breaks = min(line$year):max(line$year),
expand = expansion(add = c(0, 0.2))) +
scale_y_continuous(labels = label_percent(accuracy = 1L)) +
labs(x = '\nYear',
y = '3-Year Completion Rate\n',
title = '3-Year Achievement Gap by Ethnicity') +
my_theme
ggplot(data = ribbon,
aes(x = year)) +
geom_ribbon(aes(ymin = black_aa,
ymax = white),
fill = 'grey90') +
geom_ribbon_pattern(aes(ymin = hispanic_latino,
ymax = white),
fill = 'grey90',
pattern_angle = 115,
pattern_colour = NA,
pattern_density = 0.5,
pattern = 'stripe') +
geom_line(data = line,
aes(y = completion,
group = ethnicity,
color = ethnicity)) +
geom_text(data = line,
aes(x = year,
y = completion,
color = ethnicity)) +
scale_x_continuous(breaks = min(line$year):max(line$year),
expand = expansion(add = c(0, 0.2))) +
scale_y_continuous(labels = label_percent(accuracy = 1L)) +
labs(x = '\nYear',
y = '3-Year Completion Rate\n',
title = '3-Year Achievement Gap by Ethnicity') +
my_theme
ggplot(data = ribbon,
aes(x = year)) +
geom_ribbon(aes(ymin = black_aa,
ymax = white),
fill = 'grey90') +
geom_ribbon_pattern(aes(ymin = hispanic_latino,
ymax = white),
fill = 'grey90',
pattern_angle = 115,
pattern_colour = NA,
pattern_density = 0.5,
pattern = 'stripe') +
geom_line(data = line,
aes(y = completion,
group = ethnicity,
color = ethnicity)) +
geom_text(data = line,
aes(x = year,
y = completion,
label = completion
color = ethnicity)) +
scale_x_continuous(breaks = min(line$year):max(line$year),
expand = expansion(add = c(0, 0.2))) +
scale_y_continuous(labels = label_percent(accuracy = 1L)) +
labs(x = '\nYear',
y = '3-Year Completion Rate\n',
title = '3-Year Achievement Gap by Ethnicity') +
my_theme
ggplot(data = ribbon,
aes(x = year)) +
geom_ribbon(aes(ymin = black_aa,
ymax = white),
fill = 'grey90') +
geom_ribbon_pattern(aes(ymin = hispanic_latino,
ymax = white),
fill = 'grey90',
pattern_angle = 115,
pattern_colour = NA,
pattern_density = 0.5,
pattern = 'stripe') +
geom_line(data = line,
aes(y = completion,
group = ethnicity,
color = ethnicity)) +
geom_text(data = line,
aes(x = year,
y = completion,
label = completion,
color = ethnicity)) +
scale_x_continuous(breaks = min(line$year):max(line$year),
expand = expansion(add = c(0, 0.2))) +
scale_y_continuous(labels = label_percent(accuracy = 1L)) +
labs(x = '\nYear',
y = '3-Year Completion Rate\n',
title = '3-Year Achievement Gap by Ethnicity') +
my_theme
ggplot(data = ribbon,
aes(x = year)) +
geom_ribbon(aes(ymin = black_aa,
ymax = white),
fill = 'grey90') +
geom_ribbon_pattern(aes(ymin = hispanic_latino,
ymax = white),
fill = 'grey90',
pattern_angle = 115,
pattern_colour = NA,
pattern_density = 0.5,
pattern = 'stripe') +
geom_line(data = line,
aes(y = completion,
group = ethnicity,
color = ethnicity)) +
geom_text(data = line,
aes(x = year,
y = completion,
label = completion,
color = ethnicity),
vjust = 1) +
scale_x_continuous(breaks = min(line$year):max(line$year),
expand = expansion(add = c(0, 0.2))) +
scale_y_continuous(labels = label_percent(accuracy = 1L)) +
labs(x = '\nYear',
y = '3-Year Completion Rate\n',
title = '3-Year Achievement Gap by Ethnicity') +
my_theme
ggplot(data = ribbon,
aes(x = year)) +
geom_ribbon(aes(ymin = black_aa,
ymax = white),
fill = 'grey90') +
geom_ribbon_pattern(aes(ymin = hispanic_latino,
ymax = white),
fill = 'grey90',
pattern_angle = 115,
pattern_colour = NA,
pattern_density = 0.5,
pattern = 'stripe') +
geom_line(data = line,
aes(y = completion,
group = ethnicity,
color = ethnicity)) +
geom_text(data = line,
aes(x = year,
y = completion,
label = completion,
color = ethnicity),
vjust = -1) +
scale_x_continuous(breaks = min(line$year):max(line$year),
expand = expansion(add = c(0, 0.2))) +
scale_y_continuous(labels = label_percent(accuracy = 1L)) +
labs(x = '\nYear',
y = '3-Year Completion Rate\n',
title = '3-Year Achievement Gap by Ethnicity') +
my_theme
ggplot(data = ribbon,
aes(x = year)) +
geom_ribbon(aes(ymin = black_aa,
ymax = white),
fill = 'grey90') +
geom_ribbon_pattern(aes(ymin = hispanic_latino,
ymax = white),
fill = 'grey90',
pattern_angle = 115,
pattern_colour = NA,
pattern_density = 0.5,
pattern = 'stripe') +
geom_line(data = line,
aes(y = completion,
group = ethnicity,
color = ethnicity)) +
geom_text(data = line,
aes(x = year,
y = completion,
label = completion,
color = ethnicity),
vjust = -0.5) +
scale_x_continuous(breaks = min(line$year):max(line$year),
expand = expansion(add = c(0, 0.2))) +
scale_y_continuous(labels = label_percent(accuracy = 1L)) +
labs(x = '\nYear',
y = '3-Year Completion Rate\n',
title = '3-Year Achievement Gap by Ethnicity') +
my_theme
ggplot(data = ribbon,
aes(x = year)) +
geom_ribbon(aes(ymin = black_aa,
ymax = white),
fill = 'grey90') +
geom_ribbon_pattern(aes(ymin = hispanic_latino,
ymax = white),
fill = 'grey90',
pattern_angle = 115,
pattern_colour = NA,
pattern_density = 0.5,
pattern = 'stripe') +
geom_line(data = line,
aes(y = completion,
group = ethnicity,
color = ethnicity)) +
geom_text(data = line,
aes(x = year,
y = completion,
label = percent(completion, 1),
color = ethnicity),
vjust = -0.5) +
scale_x_continuous(breaks = min(line$year):max(line$year),
expand = expansion(add = c(0, 0.2))) +
scale_y_continuous(labels = label_percent(accuracy = 1L)) +
labs(x = '\nYear',
y = '3-Year Completion Rate\n',
title = '3-Year Achievement Gap by Ethnicity') +
my_theme
library('ggrepel')
install.packages('ggrepel')
library('ggrepel')
ggplot(data = ribbon,
aes(x = year)) +
geom_ribbon(aes(ymin = black_aa,
ymax = white),
fill = 'grey90') +
geom_ribbon_pattern(aes(ymin = hispanic_latino,
ymax = white),
fill = 'grey90',
pattern_angle = 115,
pattern_colour = NA,
pattern_density = 0.5,
pattern = 'stripe') +
geom_line(data = line,
aes(y = completion,
group = ethnicity,
color = ethnicity)) +
geom_text_repel(data = line,
aes(x = year,
y = completion,
label = percent(completion, 1),
color = ethnicity),
vjust = -0.5) +
scale_x_continuous(breaks = min(line$year):max(line$year),
expand = expansion(add = c(0, 0.2))) +
scale_y_continuous(labels = label_percent(accuracy = 1L)) +
labs(x = '\nYear',
y = '3-Year Completion Rate\n',
title = '3-Year Achievement Gap by Ethnicity') +
my_theme
ggplot(data = ribbon,
aes(x = year)) +
geom_ribbon(aes(ymin = black_aa,
ymax = white),
fill = 'grey90') +
geom_ribbon_pattern(aes(ymin = hispanic_latino,
ymax = white),
fill = 'grey90',
pattern_angle = 115,
pattern_colour = NA,
pattern_density = 0.5,
pattern = 'stripe') +
geom_line(data = line,
aes(y = completion,
group = ethnicity,
color = ethnicity)) +
geom_text(data = line,
aes(x = year,
y = completion,
label = percent(completion, 1),
color = ethnicity),
vjust = -0.5) +
scale_x_continuous(breaks = min(line$year):max(line$year),
expand = expansion(add = c(0, 0.2))) +
scale_y_continuous(labels = label_percent(accuracy = 1L)) +
labs(x = '\nYear',
y = '3-Year Completion Rate\n',
title = '3-Year Achievement Gap by Ethnicity') +
my_theme
line[line$year == 2011,]
ifelse(line$year == 2011, 0, 1)
line$alpha <- ifelse(line$year == 2011, 0, 1)
ggplot(data = ribbon,
aes(x = year)) +
geom_ribbon(aes(ymin = black_aa,
ymax = white),
fill = 'grey90') +
geom_ribbon_pattern(aes(ymin = hispanic_latino,
ymax = white),
fill = 'grey90',
pattern_angle = 115,
pattern_colour = NA,
pattern_density = 0.5,
pattern = 'stripe') +
geom_line(data = line,
aes(y = completion,
group = ethnicity,
color = ethnicity)) +
geom_text(data = line,
aes(x = year,
y = completion,
label = percent(completion, 1),
color = ethnicity,
alpha = alpha),
vjust = -0.5) +
scale_x_continuous(breaks = min(line$year):max(line$year),
expand = expansion(add = c(0, 0.2))) +
scale_y_continuous(labels = label_percent(accuracy = 1L)) +
labs(x = '\nYear',
y = '3-Year Completion Rate\n',
title = '3-Year Achievement Gap by Ethnicity') +
my_theme
ggplot(data = ribbon,
aes(x = year)) +
geom_ribbon(aes(ymin = black_aa,
ymax = white),
fill = 'grey90') +
geom_ribbon_pattern(aes(ymin = hispanic_latino,
ymax = white),
fill = 'grey90',
pattern_angle = 115,
pattern_colour = NA,
pattern_density = 0.5,
pattern = 'stripe') +
geom_line(data = line,
aes(y = completion,
group = ethnicity,
color = ethnicity)) +
geom_text(data = line,
aes(x = year,
y = completion,
label = percent(completion, 1),
color = ethnicity,
alpha = alpha),
vjust = -0.5) +
scale_x_continuous(breaks = min(line$year):max(line$year),
expand = expansion(add = c(0, 0.2))) +
scale_y_continuous(labels = label_percent(accuracy = 1L)) +
scale_alpha_continuous(guide = 'none') +
labs(x = '\nYear',
y = '3-Year Completion Rate\n',
title = '3-Year Achievement Gap by Ethnicity') +
my_theme
library('ggplot2')
library('ggpattern')
library('scales')
library('ggrepel')
#get only CoD data for groups under analysis.
#Two df, one for lines, one for ribbons
line <- gap[gap$institution == 'College of DuPage',
c('year', 'black_aa',
'hispanic_latino',
'white')]
#melt for line df
line <- melt(line,
id.vars = 'year')
#omitting label for 2011
line$alpha <- ifelse(line$year == 2011, 0, 1)
#rename and coerce to factor for easier plotting
colnames(line) <- c('year', 'ethnicity', 'completion')
line$ethnicity <- factor(line$ethnicity,
levels = c('black_aa',
'hispanic_latino',
'white'),
labels = c('Black/African American',
'Hispanic/Latino',
'White'))
#create ribbon df
ribbon <- gap[gap$institution == 'College of DuPage',
c('year', 'black_aa',
'hispanic_latino',
'white')]
ggplot(data = ribbon,
aes(x = year)) +
geom_ribbon(aes(ymin = black_aa,
ymax = white),
fill = 'grey90') +
geom_ribbon_pattern(aes(ymin = hispanic_latino,
ymax = white),
fill = 'grey90',
pattern_angle = 115,
pattern_colour = NA,
pattern_density = 0.5,
pattern = 'stripe') +
geom_line(data = line,
aes(y = completion,
group = ethnicity,
color = ethnicity)) +
geom_text(data = line,
aes(x = year,
y = completion,
label = percent(completion, 1),
color = ethnicity,
alpha = alpha),
vjust = -0.5) +
scale_x_continuous(breaks = min(line$year):max(line$year),
expand = expansion(add = c(0, 0.2))) +
scale_y_continuous(labels = label_percent(accuracy = 1L)) +
scale_alpha_continuous(guide = 'none') +
labs(x = '\nYear',
y = '3-Year Completion Rate\n',
title = '3-Year Achievement Gap by Ethnicity') +
my_theme
ggsave(file.path('graphs', 'plot3.png'))
line
library('ggplot2')
library('ggpattern')
library('scales')
library('ggrepel')
#get only CoD data for groups under analysis.
#Two df, one for lines, one for ribbons
line <- gap[gap$institution == 'College of DuPage',
c('year', 'black_aa',
'hispanic_latino',
'white')]
#melt for line df
line <- melt(line,
id.vars = 'year')
#rename
colnames(line) <- c('year', 'ethnicity', 'completion')
#omitting label for 2011
line$alpha <- ifelse(line$year == 2011, 0, 1)
#coerce to factor for easie rplotting
line$ethnicity <- factor(line$ethnicity,
levels = c('black_aa',
'hispanic_latino',
'white'),
labels = c('Black/African American',
'Hispanic/Latino',
'White'))
#create ribbon df
ribbon <- gap[gap$institution == 'College of DuPage',
c('year', 'black_aa',
'hispanic_latino',
'white')]
ggplot(data = ribbon,
aes(x = year)) +
geom_ribbon(aes(ymin = black_aa,
ymax = white),
fill = 'grey90') +
geom_ribbon_pattern(aes(ymin = hispanic_latino,
ymax = white),
fill = 'grey90',
pattern_angle = 115,
pattern_colour = NA,
pattern_density = 0.5,
pattern = 'stripe') +
geom_line(data = line,
aes(y = completion,
group = ethnicity,
color = ethnicity)) +
geom_text(data = line,
aes(x = year,
y = completion,
label = percent(completion, 1),
color = ethnicity,
alpha = alpha),
vjust = -0.5) +
scale_x_continuous(breaks = min(line$year):max(line$year),
expand = expansion(add = c(0, 0.2))) +
scale_y_continuous(labels = label_percent(accuracy = 1L)) +
scale_alpha_continuous(guide = 'none') +
labs(x = '\nYear',
y = '3-Year Completion Rate\n',
title = '3-Year Achievement Gap by Ethnicity') +
my_theme
ggsave(file.path('graphs', 'plot3.png'))
